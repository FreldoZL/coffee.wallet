<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Security-Policy"
        content="default-src * data: gap: file: https://* 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="viewport-fit=cover, user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <link rel="stylesheet" type="text/css" href="css/layout.css">
        <link rel="stylesheet" type="text/css" href="css/ui.css">
	      <title>coffee.wallet</title>
    </head>
    <body>
        <div id="nav">
          <div id="toggleMenu" ontouchstart="app.toggleMenu()" class="navButton">
            <img src="icons/menu.png" alt="menu"/>
          </div>
          <div id="menu">
            <ul>
              <li>
                <a href="javascript:app.popupAddCoin()">
                  <img src="icons/plus.png"/>
                  add&nbsp;currencies
                </a>
              </li>
              <li>
                <a href="javascript:app.popupPriceSettings()">
                  <img src="icons/settings.png"/>
                  settings
                </a>
              </li>
              <!--li>
                <a href="javascript:app.popupSettings()">
                  <img src="icons/settings.png"/>
                  coin settings
                </a>
              </li-->
              <li>
                <a href="javascript:app.popupHelp()">
                  <img src="icons/help.png"/>
                  help
                </a>
              </li>
              <!--li>
                <a id="feedback" href="javascript:app.popupFeedback()">
                  <img src="icons/heart.png"/>
                  feedback
                </a>
              </li-->
              <li>
                <a href="javascript:app.exportAllKeys()">
                  <img src="icons/export.png"/>
                  backup wallets
                </a>
              </li>
              <!--li>
                <a href="javascript:app.importAllKeys()">
                  <img src="icons/import.png"/>
                  restore wallets
                </a>
              </li-->
            </ul>
          </div>

          <a id="refresh" href="javascript:app.updateMarketCap()" class="navButton spinner">
            <img src="icons/refreshall.png" alt="refresh"/>
          </a>

          <div class="totals">
            <h1>
              <span id="grandTotal"></span>
            </h1>
            <h2>
              (<span id="totalOnline"></span> online)
            </h2>
          </div>

        </div>
        <div id="container">
          <div id="swiper">
            <div class="swipe_tab">
              <div class="tab_inner">
                <ul id="history">
                  <li class="info">loading history ...</li>
                </ul>
              </div>
            </div>
            <div class="swipe_tab">
              <div id="wallets" class="tab_inner">
                <div id="walletsList">
                </div>
          	    <div onclick="app.popupAddCoin()" class="walletsActions">
                    add currencies
          	    </div>
              </div>
            </div>
            <div class="swipe_tab">
              <div class="tab_inner">
                <div id="tools">
                  <div class="row">
                    <button class="f1 stitched" onclick="app.scanQrCode(app.handleAnyQRCode.bind(app))" style="margin-right:5px;">
                      <img src="icons/quickscan.png"/>
                      Scan
                    </button>

                    <button class="f1 stitched" onclick="app.pasteClipboard(app.handleAnyQRCode.bind(app))" style="margin-left:5px;">
                      <img src="icons/quickpaste.png"/>
                      Paste
                    </button>
                  </div>

                  <button class="stitched" onclick="app.popupSendViaMessage()">
                    <img src="icons/email.png"/>
                    Send via message
                    <!--span class="soon">(comming soon)</span-->
                  </button>

                  <button class="stitched" onclick="app.popupExchange()">
                    <img src="icons/changelly.png"/>
                    Exchange
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
    <div id="foot">
      <div ontouchstart="app.tabHistory()" class="tab">
        <img src="icons/history.png" alt="history"/>
        <br/>
        history
      </div>
      <div ontouchstart="app.tabWallets()" class="tab active">
        <img src="icons/home.png" alt="wallets"/>
        <br/>
        wallets
      </div>
      <div ontouchstart="app.tabTools()" class="tab">
       <img src="icons/tools.png" alt="tools"/>
       <br/>
       tools
     </div>
    </div>
	<div id="overlay">
        </div>

        <div id="popup">
          <h1 id="popupHead">
            <a href="javascript:app.closePopup()" class="close"><img src="icons/hide.png"/></a>
            <span id="popupTitle"></span>
            <img id="popupIcon" src="icons/hide.png" style="display:none;"/>
          </h1>
          <div id="popupContent">
            <div id="sendViaMessagePopup" style="display:none;">
              <h2>send via message</h2>
              <p>This feature is available for non-empty wallets whose transaction fees are not paid with other currency.</p>
              <div id="sendViaMessageButtons">
              </div>
              <h2>outgoing messages log</h2>
              <table id="sendViaMessageHistory">
                <tr><td>your history is empty</td></tr>
              </table>
            </div>
            <div id="exchangePopup" style="display:none;">
              <div style="margin: 15px; overflow: auto;">
                <img src="icons/changelly_color.png" style="float:left; width: 96px;"/>
                <div style="float:none; margin-left:108px;">
                  Powered by Changelly. <br/>
                  Usually a transaction is completed within <b>5&#8209;30&nbsp;minutes</b> but it can take longer.
                  Refer to <a href="#" onclick="window.open('https://changelly.com/', '_system');">changelly.com</a> for more info.
                </div>
              </div>
              <div class="section">
                sell coin:
                <select onchange="app.updateExchange()" id="exchangeSellCoin"></select>
                sell ammount
                (min: <a id="exchangeSellMin" href="#" onclick="document.getElementById('exchangeSellAmmount').value = this.textContent; app.updateExchange();"></a>,
                max: <a id="exchangeSellMax" href="#" onclick="document.getElementById('exchangeSellAmmount').value = this.textContent; app.updateExchange();"></a>):
                <input
                  id="exchangeSellAmmount"
                  class="dark"
                  type="number"
                  step="0.000000000001"
                  value="0"
                  onchange="app.updateExchange()"
                  onkeyup="app.updateExchange()"
                  required />
                value: <span id="exchangeSellValue"></span>
                <br/>
                (+ <span id="exchangeSellFee"></span> network fee)
              </div>
              <div class="section">
                buy coin:
                <select onchange="app.updateExchange()" id="exchangeBuyCoin"></select>
                estimated buy ammount:
                <input
                  id="exchangeBuyAmmount"
                  class="dark"
                  type="number"
                  value="0"
                  readonly
                >
                value: <span id="exchangeBuyValue"></span>
                <br/>
                This is <b>estimated</b> and depends on current market dynamics.
              </div>
              <div class="section">
                Coffee Wallet does not charge additional fees. You will get same results exchanging trough changelly.com website.
              </div>
              <div class="actions row">
                <button id="exchangeButton" class="box f1" onclick="app.doExchange()">
                  Exchange
                </button>
              </div>
            </div>
            <div id="coinInfoPopup" style="display:none;">
              <div class="rowIcon active"><img class="coinIcon coinBig" src=""/></div>
              <div id="coinInfoDescription"></div>
            </div>
            <div id="offlineAssetsPopup" style="display:none;">
              <div class="rowIcon active"><img class="coinIcon coinBig" src=""/></div>

              <h2 style="text-align:center;">offline assets</h2>
              <div class="unpad">
                <div id="offlineAssets">

                </div>
              </div>

              <div class="spacing">&nbsp;</div>
              <div class="row spacing">
                <button class="box f1" onclick="app.popupAddOfflineAsset('balance', '')">
                  add balance
                </button>
                <button id="addAddressButton" class="box f1" onclick="app.popupAddOfflineAsset('addr', '')">
                  add address
                </button>
                <button id="newAddressButton" class="box f1" onclick="app.popupAddNewAddress()">
                  new address
                </button>
              </div>
            </div>

            <div id="priceSettingsPopup" style="display:none;">
              <h2>Fiat Currency</h2>
              <select id="priceProvider">
              </select>
              <select id="priceUnit">
              </select>
              <p style="padding-bottom: 10px;">This will affect displaying and converting values across the application.</p>

              <h2>Developer Tools</h2>
              <label class="checkbox">
                <input type="checkbox" id="settingsEnableTestCoins" />
                <div class="fakecheck"></div>
                enable test network coins
              </label>
              <p style="padding-bottom: 10px;">Enable this to get access to test networks coins like Bitcoin Testnet or ETH Ropsten.</p>
              <div class="row spacing">
                <button class="box f1" onclick="app.savePriceSettings()">
                  Save
                </button>
              </div>

            </div>
            <div id="addCoinPopup" style="display:none;">
              <div style="padding:0 7px 20px 7px">
                <div class="field dark" style="padding-bottom: 15px;">
                  <input id="addCoinFilter" value="" required/>
                  <label for="addCoinFilter">search</label>
                </div>
                <!-- label class="checkbox" style="padding-bottom: 10px;">
                  <input type="checkbox" id="addCoinOnlySupportedRead" />
                  <div class="fakecheck"></div>
                  only coins that can be queried by address
                </label -->
                <label class="checkbox">
                  <input type="checkbox" id="addCoinOnlySupportedWrite" />
                  <div class="fakecheck"></div>
                  only coins with local wallet support
                </label>
              </div>
              <div id="allCoins"></div>
              <div id="moreCoins"></div>
            </div>
            <div id="helpPopup" style="display:none;">
              <div style="text-align:center;">
                <h2>Coffee Wallet</h2>
                <h3>Version: <strong><span class="VERSION">0.7.4</span></strong></h3>
                <p>
                  Coffee Wallet is a blockchain wallet and portfolio app.
                  It allows you to watch your funds stored elsewhere (paper/hardware/app/online wallets).
                  It also has a support for selected coins to send and receive from local wallet.
                </p>
                <p>
                  <a href="#" onclick="window.open('https://wallet.coffee/', '_system');" style="color: #766054; font-size: 16px;">https://wallet.coffee/</a>
                </p>
                <p>
                  <a href="#" onclick="window.open('https://twitter.com/CoffeeWallet', '_system');"><img width="42" src="icons/twitter.png"/></a>
                  &nbsp;&nbsp;
                  <a href="#" onclick="window.open('https://www.reddit.com/r/CoffeeWallet/', '_system');"><img width="42" src="icons/reddit.png"/></a>
                </p>
                <h2>Home Screen Layout</h2>
              </div>
                <img src="img/help1.png" style="width:100%;" />
                <p>top bar:</p>
                <ol>
                  <li>Menu with advanced options. Change price source and default currency here.</li>
                  <li>Grand total. Total sum of all your offline and online funds.</li>
                  <li>Refresh all. Fetch rates from prices source and refresh all wallets balances. </li>
                </ol>
                <p>coin info:</p>
                <ol start="4">
                  <li>Online total. Balance of your local wallets. Private keys to this wallets are stored on your device.</li>
                  <li>Offline total. Total amount of read-only, offline balances you watch.</li>
                </ol>
                <p>swipe coin left to see actions:</p>
                <ol start="6">
                  <li>Refresh button. Tap to refresh online and offile totals.</li>
                  <li>Offline funds. Tap to see and edit your offline wallets and balances.</li>
                  <li>More icon. Tap to see coin info and advanced options.</li>
                </ol>
                <p>swipe coin right to see actions:</p>
                <ol start="9">
                  <li>Receive button. Tap to see local address and its QR code.</li>
                  <li>Send button. Tap to see send form and send your funds from your wallet.</li>
                </ol>
                <p>application tabs</p>
                <ol start="11">
                  <li>History tab. Transactions and other events are logged here.</li>
                  <li>Wallets tab. Your home screen with all your wallets.</li>
                  <li>Tools tab. "Send via message", "Scan QR code", "Exchange" and other tools.</li>
                </ol>
            </div>
            <div id="feedbackPopup" style="display:none;">
              <h2>Coffee Wallet</h2>
            </div>
          </div>
        </div>

        <div id="formPopup">
          <div id="addOfflineAssetPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img class="coinIcon coinBig" src=""/></div>
              <img class="actionLeft" src="icons/cancel.png"/>
              <img class="actionRight" src="icons/submit.png"/>
            </div>
            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png"/> cancel</button>
              <button class="f1 submit" onclick="app.saveOfflineAsset()"><span id="addOfflineAssetPopupSave">save</span> <img src="icons/ico.send.png"/></button>
            </div>

            <div id="addOfflineAssetAddrDiv">
              <div class="formButtons row">
                <button class="f1" onclick="app.pasteClipboard(app.pasteToField.bind(app, 'addOfflineAssetAddr'))">
                  paste
                  <img src="icons/paste.png"/>
                </button>
                <button class="f1" onclick="app.scanQrCode(app.pasteToField.bind(app, 'addOfflineAssetAddr'))">
                  <img src="icons/scan.png"/>
                  scan
                </button>
              </div>

              <div class="formFields">
                <div class="field">
                  <input
                    id="addOfflineAssetAddr"
                    onfocus="app.validateAddr('addOfflineAssetAddr', true)"
                    onblur="app.validateAddr('addOfflineAssetAddr')"
                    value=""
                    required />
                  <label for="addOfflineAssetAddr">address</label>
                </div>
              </div>
            </div>

            <div class="formFields">
              <div id="addOfflineAssetBalanceDiv" class="field">
                <input type="number" min="0" step="0.000000000001" id="addOfflineAssetBalance" value="" required />
                <label for="addOfflineAssetBalance">balance</label>
              </div>
              <div class="field">
                <input id="addOfflineAssetComment" value="" required />
                <label for="addOfflineAssetComment">comment</label>
              </div>
            </div>

          </div>
          <div id="sendPaymentPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img class="coinIcon coinBig" src=""/></div>
              <img class="actionLeft" src="icons/cancel.png"/>
              <img class="actionRight" src="icons/submit.send.png"/>
            </div>
            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png"/> cancel</button>
              <button class="normalSend f1 submit" onclick="app.sendPayment()">send <img src="icons/ico.send.png"/></button>
              <button class="socialSend f1 submit" onclick="app.sendSocialPayment()">send <img src="icons/ico.send.png"/></button>
            </div>
            <div class="normalSend formButtons row">
              <button class="f1" onclick="app.pasteClipboard(app.pasteToSendForm.bind(app))">
                paste
                <img src="icons/paste.png"/>
              </button>
              <button class="f1" onclick="app.scanQrCode(app.pasteToSendForm.bind(app))">
                <img src="icons/scan.png"/>
                scan
              </button>
            </div>
            <div class="formFields">
              <div class="normalSend field">
                <input
                  id="sendCoinAddr"
                  onfocus="app.validateAddr('sendCoinAddr', true)"
                  onblur="app.validateAddr('sendCoinAddr')"
                  required
                />
                <label for="sendCoinAddr">recipient address</label>
                <div class="legend"></div>
              </div>

              <div class="row">
                <div class="field f1">
                  <input
                    id="sendCoinAmount"
                    type="number"
                    step="0.000000000001"
                    class="has-unit"
                    onfocus="app.sendCoinValidateAmount(true)"
                    onblur="app.sendCoinValidateAmount()"
                    onchange="app.sendCoinUpdateValue()"
                    onkeyup="app.sendCoinUpdateValue()"
                    required
                  />
                  <span class="input-unit" id="sendCoinName"></span>
                  <label for="sendCoinAmount">amount</label>
                  <div class="legend"></div>
                </div>
                <div class="equalizer">
                  =
                </div>
                <div class="field f1">
                  <input
                    id="sendCoinValue"
                    type="number"
                    step="0.000000000001"
                    class="has-unit"
                    onfocus="app.sendCoinValidateAmount(true)"
                    onblur="app.sendCoinValidateAmount()"
                    onchange="app.sendCoinUpdateAmount()"
                    onkeyup="app.sendCoinUpdateAmount()"
                    required
                  />
                  <span class="input-unit" id="sendFiatName"></span>
                  <label for="sendCoinAmount">equivalent</label>
                  <div class="legend"></div>
                </div>
              </div>

              <div class="field">
                <div class="range-input">
                  <input id="sendCoinFee" oninput="app.sendCoinUpdateFee()" type="range" min="0" max="100" step="1"/>
                </div>

                <div class="row fee">
                  <div class="f3" style="text-align:left;">
                    fee:&nbsp;<strong><span id="feeAmount">0</span></strong>
                  </div>
                  <div class="f2" style="text-align:right; flex: 1.6;">
                    est.&nbsp;time:&nbsp;<strong><span id="feeTime">0 min</span></strong>
                  </div>
                </div>
              </div>
            </div>

          </div>
          <div id="receivePaymentPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img class="coinIcon coinBig" src=""/></div>
              <img class="actionLeft" src="icons/cancel.png"/>
              <img class="actionRight" src="icons/submit.copy.png"/>
            </div>
            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png"/> close</button>
              <button class="f1 submit" onclick="app.copyReceiveCoinAddrToClp()">copy <img src="icons/ico.copy.png"/></button>
            </div>

            <div class="receiveAddr">
              <label><span id="receiveCoinName"></span></label>
              <textarea readonly="readonly" id="receiveCoinAddr"></textarea>
            </div>
            <div id="receiveCoinQrcode"></div>
          </div>


          <div id="exportPrivateKeyPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img class="coinIcon coinBig" src=""/></div>
              <img class="actionLeft" src="icons/cancel.png"/>
            </div>

            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png"/> cancel</button>
            </div>

            <div class="unpad stitch"></div>
            <div id="privateKeyValue"></div>
          </div>

          <div id="importPrivateKeyPopup" class="formContent" style="display:none;">
            <div class="formTop">
              <div class="circleIcon active"><img class="coinIcon coinBig" src=""/></div>
              <img class="actionLeft" src="icons/cancel.png"/>
              <img class="actionRight" src="icons/submit.png"/>
            </div>

            <div class="formActions row">
              <button class="f1 cancel" onclick="app.closeForm()"><img src="icons/ico.cancel.png"/> cancel</button>
              <button class="f1 submit" onclick="app.importPrivateKey()">import <img src="icons/ico.send.png"/></button>
            </div>

            <div class="spacing row">
              <button class="f1" onclick="app.pasteClipboard(app.pasteToField.bind(app, 'importPrivateKeyInput'))">
                paste
                <img src="icons/paste.png"/>
              </button>
              <button class="f1" onclick="app.scanQrCode(app.pasteToField.bind(app, 'importPrivateKeyInput'))">
                <img src="icons/scan.png"/>
                scan
              </button>
            </div>

            <div class="unpad stitch"></div>

            <div class="field">
              <label for="importPrivateKeyInput">key value:</label>
              <input id="importPrivateKeyInput" value=""/>
            </div>
            <div class="spacing">&nbsp;</div>
          </div>

        </div>

        <div id="messages">
        </div>

        <div id="lockPopup" class="hidden">
            <div id="lockPopupContent">
              <h1 id="lockTitle">Confirm</h1>
              <div class="stitch"></div>
              <div id="lockMessage" class="spacing">
                confirm
              </div>
              <div class="stitch"></div>
              <div class="spacing row">
                <button id="lockPopupCancel" class="f1" onclick="app.cancelAuth()">
                  <img src="icons/no.png" alt="menu"/>
                  <span id="lockPopupCancelText">cancel</span>
                </button>
                <button class="f1" onclick="app.confirmAuth()">
                  <img src="icons/yes.png" alt="menu"/>
                  <span id="lockPopupConfirmText">confirm</span>
                </button>
              </div>
            </div>
        </div>
        <div id="uxHint"></div>

        <script type="text/javascript" src="cordova.js"></script>

        <script type="text/javascript" src="js/core.js"></script>

        <script type="text/javascript" src="vendor/qrcode.js"></script>
        <script type="text/javascript" src="vendor/web3.min.js"></script>
        <script type="text/javascript" src="vendor/btcjs.js"></script>
        <script type="text/javascript" src="vendor/range-slider.min.js"></script>
        <script type="text/javascript" src="vendor/browserify.js"></script>

        <script type="text/javascript" src="js/fasttap.js"></script>
        <script type="text/javascript" src="js/database.js"></script>
        <script type="text/javascript" src="js/logger.js"></script>
        <script type="text/javascript" src="js/settings.js"></script>

        <script type="text/javascript" src="js/coin.apis.btcjs.js"></script>
        <script type="text/javascript" src="js/coin.apis.web3js.js"></script>
        <script type="text/javascript" src="js/coin.apis.cmc.js"></script>
        <script type="text/javascript" src="js/coin.apis.js"></script>

        <script type="text/javascript" src="js/price.providers.js"></script>

        <script type="text/javascript" src="js/widget.wallet.js"></script>
        <script type="text/javascript" src="js/widget.asset.js"></script>
        <script type="text/javascript" src="js/widget.select.js"></script>
        <script type="text/javascript" src="js/widget.coinbutton.js"></script>
        <script type="text/javascript" src="js/changelog.js"></script>
        <script type="text/javascript" src="js/config.js"></script>
        <script type="text/javascript" src="js/changelly.js"></script>
        <script type="text/javascript" src="js/app.js"></script>
    </body>
</html>
